#ifndef EXTENDED_STAGE_SELECT_H
#define EXTENDED_STAGE_SELECT_H

#include "object.h"
#include "textbox.h"

// ID of the Nisitenma-Ichigo file we're gonna replace with the overlay
#define EXTENDED_STAGE_SELECT_OVERLAY_ID 2

#define NUM_MAPS 17
#define OPTION_MAX 8
#define SPECIALS_PER_WARP 2
#define NUMBER_OF_HEADERS 5
#define NUMBER_OF_CONVENIENCE_WARPS 3

typedef struct {
    ObjectHeader header;
    textboxObject** mapNamesTextboxes;
    textboxObject** headerNamesTextboxes;
    textboxObject** convenienceWarpTextboxes;
    textboxObject* characterNamesTextbox;
    textboxObject* YesNoTextbox;
    textboxObject* DifficultyTextbox;
    textboxObject* SpecialCountTextbox;
    textboxObject* ArrowTextbox;
    s8 num_maps;
    s8 specials_per_warp;
    s8 first_string_ID;
    s8 option;
    s8 map;
    s8 character;
    s8 alternate_costume;
    s8 difficulty;
    s8 convenience_warp;
    s8 confirmed;
} extendedStageSelect;

void extendedStageSelect_entrypoint(extendedStageSelect* self);
void extendedStageSelect_createTextboxes(extendedStageSelect* self);
void extendedStageSelect_init(extendedStageSelect* self);
void extendedStageSelect_loop(extendedStageSelect* self);
void extendedStageSelect_warpToMap(extendedStageSelect* self);

void (*extendedStageSelect_functions[])(extendedStageSelect* self) = 
{
    extendedStageSelect_createTextboxes,
    extendedStageSelect_init,
    extendedStageSelect_loop,
    extendedStageSelect_warpToMap
};

const s8* destMapIDs[NUM_MAPS] = {
    16,
    0,
    2,
    5,
    7,
    8,
    42,
    37,
    36,
    14,
    34,
    39,
    32,
    29,
    27,
    41,
    20
}; 

const s8* destSpawnIDs[NUM_MAPS] = {
    0,
    6,
    7,
    4,
    4,
    4,
    15,
    2,
    2,
    3,
    2,
    2,
    2,
    2,
    4,
    2,
    1
}; 

// To be overwritten with the actual name pool by the rando patcher.
u16 stage_names_pool[] = {
    0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0xFFFF,
    0x005F, 0x0010, 0x0012, 0xB700, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0xFFFF,
    0x005F, 0x0010, 0x0014, 0xB700, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0xFFFF,
    0x005F, 0x0010, 0x0016, 0xB700, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0xFFFF,
    0x005F, 0x0010, 0x0018, 0xB700, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0xFFFF,
    0x005F, 0x0011, 0x0010, 0xB700, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0xFFFF,
    0x005F, 0x0011, 0x0012, 0xB700, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0xFFFF,
    0x005F, 0x0011, 0x0014, 0xB700, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0xFFFF,
    0x005F, 0x0011, 0x0016, 0xB700, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0xFFFF,
    0x005F, 0x0011, 0x0018, 0xB700, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0xFFFF,
    0x005F, 0x0012, 0x0010, 0xB700, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0xFFFF,
    0x005F, 0x0012, 0x0012, 0xB700, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0xFFFF,
    0x005F, 0x0012, 0x0014, 0xB700, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0xFFFF,
    0x005F, 0x0012, 0x0016, 0xB700, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0xFFFF,
    0x005F, 0x0012, 0x0018, 0xB700, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0xFFFF,
    0x005F, 0x0013, 0x0010, 0xB700, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0x0042, 0xFFFF,
    0x005F, 0x0013, 0x0012, 0xB700, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0x0041, 0xFFFF, 0xB500, 0x0000
};

u16 convenience_warp_names_pool[] = {
    // Villa end
    0x003B, 0x0023, 0x000D, 0x004C, 0x0045, 0x0046, 0x0054, 0x003D, 0x001A, 0xB600, 0x0036, 0x0049, 0x004C, 0x004C, 0x0041, 0xB700, 0x0045, 0x004E, 0x0044, 0xFFFF,
    // CC end
    0x003B, 0x0023, 0x000D, 0x0052, 0x0049, 0x0047, 0x0048, 0x0054, 0x003D, 0x001A, 0xB600, 0x0023, 0x0023, 0xB700, 0x0045, 0x004E, 0x0044, 0xFFFF,
    // Keep end
    0x003B, 0x0023, 0x000D, 0x0055, 0x0050, 0x003D, 0x001A, 0xB600, 0x002B, 0x0045, 0x0045, 0x0050, 0xB700, 0x0045, 0x004E, 0x0044, 0xFFFF, 0xB500
};

const u16* convenience_warp_flags[NUMBER_OF_CONVENIENCE_WARPS] = {
    0x314,
    0x315,
    0x316
};

const s8* convenience_warp_maps[NUMBER_OF_CONVENIENCE_WARPS] = {
    0x1A,
    0x0F,
    0x14
};

const s8* convenience_warp_spawns[NUMBER_OF_CONVENIENCE_WARPS] = {
    0x02,
    0x03,
    0x01
};

u16 header_names_pool[] = {
    // Where to...?
    0x0037, 0x0048, 0x0045, 0x0052, 0x0045, 0xB700, 0x0054, 0x004F, 0x000E, 0x000E, 0x000E, 0x001F, 0xFFFF,
    // Difficulty [L]
    0x0024, 0x0049, 0x0046, 0x0046, 0x0049, 0x0043, 0x0055, 0x004C, 0x0054, 0x0059, 0x003B, 0x002C, 0x003D, 0x001A, 0xFFFF,
    // Character [Z]
    0x0023, 0x0048, 0x0041, 0x0052, 0x0041, 0x0043, 0x0054, 0x0045, 0x0052, 0x003B, 0x003A, 0x003D, 0x001A, 0xFFFF,
    // Alt Costume [R]
    0x0021, 0x004C, 0x0054, 0xB700, 0x0023, 0x004F, 0x0053, 0x0054, 0x0055, 0x004D, 0x0045, 0x003B, 0x0032, 0x003D, 0x001A, 0xFFFF, 
    // Specials times
    0xA200, 0x005F, 0xA200, 0x0058, 0xFFFF, 0xB500,
};

u16 arrow_textbox_pool[] = {
    0x0065, 0xFFFF, 0xB500, 0x0000
};

const char* characterNames[] = {
    "Reinhardt",
    "Carrie",
    "Cornell",
    "Henry",
};

u16 character_sound_ids[] = {
    0x3F5,
    0x3F7,
    0x40A,
    0x313,
};

const char* YesNoSelection[] = {
    "NO",
    "YES"
};

const char* DifficultySelection[] = {
    "Easy",
    "Normal",
    "Hard"
};

extern s8 MOD_SELECTED_MAP;
extern s8 MOD_SELECTED_OPTION;
extern s8 MOD_SELECTED_FIRST_STRING_ID;

extern u16 screen_letterbox_pos_left;
extern u16 screen_letterbox_pos_up;
extern u16 screen_letterbox_pos_right;
extern u16 screen_letterbox_pos_down;
extern u16 expansion_pak_enabled;

#endif
